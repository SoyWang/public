user www-data;
worker_processes auto;
pid /run/nginx.pid;
include /etc/nginx/modules-enabled/*.conf;


events {
worker_connections 76800;
multi_accept on;
}

http {
        include       mime.types;
 
        # 首页
        server {
            listen       80;
            server_name  f3club.io;

            location / {
                proxy_pass http://127.0.0.1:7000; 
                root   html;
                index  index.html index.htm;
            }
            # 错误页面配置
            error_page   500 502 503 504  /50x.html;
            location = /50x.html {
                root   html;
            }
            # 设置上传文件的最大大小
            client_max_body_size 128M;
        }


        # 首页（https）
        server {
            listen       443 http2 ssl;
            server_name  f3club.io; # 一级域名

            ssl_certificate      cert.pem;
            ssl_certificate_key  cert.key;

            ssl_session_cache    shared:SSL:1m;
            ssl_session_timeout  5m;

            ssl_ciphers  HIGH:!aNULL:!MD5;
            ssl_prefer_server_ciphers  on;

            location / {
                proxy_pass http://127.0.0.1:7000;
                root   html;
                index  index.html index.htm;
            }
            # 错误页面配置
            error_page   500 502 503 504  /50x.html;
            location = /50x.html {
                root   html;
            }
            # 设置上传文件的最大大小
            client_max_body_size 128M;
        }

        # 首页
        server {
            listen       80;
            server_name  vip.f3club.io;

            location / {
                proxy_pass http://127.0.0.1:7000; 
                root   html;
                index  index.html index.htm;
            }
            # 错误页面配置
            error_page   500 502 503 504  /50x.html;
            location = /50x.html {
                root   html;
            }
        }


        # 首页（https）
        server {
            listen       443 http2 ssl;
            server_name  vip.f3club.io; # 一级域名

            ssl_certificate      cert.pem;
            ssl_certificate_key  cert.key;

            ssl_session_cache    shared:SSL:1m;
            ssl_session_timeout  5m;

            ssl_ciphers  HIGH:!aNULL:!MD5;
            ssl_prefer_server_ciphers  on;

            location / {
                proxy_pass http://127.0.0.1:7000;
                root   html;
                index  index.html index.htm;
            }
            # 错误页面配置
            error_page   500 502 503 504  /50x.html;
            location = /50x.html {
                root   html;
            }
        }

        # KOL（http）
        server {
            listen       80;
            server_name  kol.f3club.io;

            location / {
                proxy_pass http://127.0.0.1:5173; 
                root   html;
                index  index.html index.htm;
            }
            # 图片等由nginx映射到本机路径
            location ~ \.(jpg|jpeg|gif|svg|svg+xml|bmp|tif|pcx|tga|exif|fpx|psd|cdr|pcd|dxf|ufo|eps|ai|raw|WMF|webp|avif|apng)$ {
                    root /data/nft/web/imgs;
            }
            # 错误页面配置
            error_page   500 502 503 504  /50x.html;
            location = /50x.html {
                root   html;
            }
            # 设置上传文件的最大大小
            client_max_body_size 128M;
        }

        # KOL（https）
        server {
            listen       443 http2 ssl;
            server_name  kol.f3club.io;

            ssl_certificate      cert.pem;
            ssl_certificate_key  cert.key;

            ssl_session_cache    shared:SSL:1m;
            ssl_session_timeout  5m;

            ssl_ciphers  HIGH:!aNULL:!MD5;
            ssl_prefer_server_ciphers  on;

            location / {
                proxy_pass http://127.0.0.1:5173;
                root   html;
                index  index.html index.htm;
            }
            # 错误页面配置
            error_page   500 502 503 504  /50x.html;
            location = /50x.html {
                root   html;
            }
            # 设置上传文件的最大大小
            client_max_body_size 128M;
        }


        # manage（http）
        server {
            listen       80;
            server_name  manage.f3club.io;

            location / {
                proxy_pass http://127.0.0.1:8080; 
                root   html;
                index  index.html index.htm;
            }
            # 图片等由nginx映射到本机路径
            location ~ \.(jpg|jpeg|gif|svg|svg+xml|bmp|tif|pcx|tga|exif|fpx|psd|cdr|pcd|dxf|ufo|eps|ai|raw|WMF|webp|avif|apng)$ {
                    root /data/nft/web/imgs;
            }
            # 错误页面配置
            error_page   500 502 503 504  /50x.html;
            location = /50x.html {
                root   html;
            }
            # 设置上传文件的最大大小
            client_max_body_size 128M;
        }
        # KOL（https）
        server {
            listen       443 http2 ssl;
            server_name  manage.f3club.io;

            ssl_certificate      cert.pem;
            ssl_certificate_key  cert.key;

            ssl_session_cache    shared:SSL:1m;
            ssl_session_timeout  5m;

            ssl_ciphers  HIGH:!aNULL:!MD5;
            ssl_prefer_server_ciphers  on;

            location / {
                proxy_pass http://127.0.0.1:8080;
                root   html;
                index  index.html index.htm;
            }
            # 错误页面配置
            error_page   500 502 503 504  /50x.html;
            location = /50x.html {
                root   html;
            }
            # 设置上传文件的最大大小
            client_max_body_size 128M;
        }
              

##
# Basic Settings
##

sendfile on;
tcp_nopush on;
tcp_nodelay on;
keepalive_timeout 65;
types_hash_max_size 2048;
# server_tokens off;

# server_names_hash_bucket_size 64;
# server_name_in_redirect off;

include /etc/nginx/mime.types;
default_type application/octet-stream;

##
# SSL Settings
##
ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE
ssl_prefer_server_ciphers on;

##
# Logging Settings
##
access_log /var/log/nginx/access.log;
error_log /var/log/nginx/error.log;

##
# Gzip Settings
##
gzip on;

include /etc/nginx/conf.d/*.conf;
include /etc/nginx/sites-enabled/*;
}



